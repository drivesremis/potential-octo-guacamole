name: Select Template

on: push

env:
  API: 5245874801700405112437
  USER_ID: 648cf80733ca47772784410c
  PROJECT_ID: 64ee7ca2c1ff57eac73d0175
  REPO_TEMPLATE: devmasyadi/TrainSurfer-Unity
  NEW_REPO_NAME: fgbFQ6naNy1700405112217


jobs:
  build:

    runs-on: ubuntu-latest
    name: Select Template
    steps:
      - uses: actions/checkout@v3
        with:
          repository: ${{ secrets.REPO_BUILDER }}
          path: ./project
          token: ${{ secrets.TOKEN_BUILDER }}
      - name: Cache node modules
        if: always()
        id: cache-nodemodules
        uses: actions/cache@v3
        with:
          path: ./project/node_modules
          key: ${{ runner.os }}-build-node-modules-${{ hashFiles('./project/package.json') }}
          restore-keys: ${{ runner.os }}-build-node-modules-
      - name: Install Dependencies
        if: ${{ always() && steps.cache-nodemodules.outputs.cache-hit != 'true' }}
        working-directory: "./project"
        run: npm i
      - name: Select
        working-directory: "./project"
        run: |
          node src/controllers/clone_template_action.js ${{ env.USER_ID }} ${{ env.PROJECT_ID }} ${{ secrets.TOKEN_BUILDER }} ${{ env.REPO_TEMPLATE }} ${{ env.NEW_REPO_NAME }}

   